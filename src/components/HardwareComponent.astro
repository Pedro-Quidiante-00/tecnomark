---
import { fetchFromAPI } from '../lib/conections.ts';

const { titulo } = Astro.props;

const productos = await fetchFromAPI('productos?filters[categoria][$eq]=hardware');
---
<section class="py-12 max-w-7xl mx-auto px-6">

    <div class="flex justify-between items-end mb-8 border-b border-gray-200 pb-4">
        <h2 class="text-3xl font-bold uppercase">{titulo}</h2>
        <a href="/" class="text-blue-700 hover:text-blue-900 font-bold flex items-center gap-2 hover:underline">
            Ver mÃ¡s ->
        </a>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {productos.map((item: any) => (
                <article class="group border border-gray-200 rounded-lg overflow-hidden hover:shadow-xl transition-all bg-white flex flex-col">
                    <a href={"/"} class="flex-1 flex flex-col">
                        <div class="relative h-56 p-4 flex justify-center items-center bg-gray-50">
                        <span class="absolute top-2 right-2 bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded">
                            {item.categoria}
                        </span>
                            <img
                                    src={item.imagen_url}
                                    alt={item.nombre}
                                    class="h-full object-contain group-hover:scale-110 transition-transform duration-300"
                            />
                        </div>
                        <div class="p-4 text-center">
                            <h3 class="font-semibold text-gray-900 line-clamp-2 h-10 mb-2">
                                {item.nombre}
                            </h3>
                            <p class="text-2xl font-extrabold text-gray-900">
                                $ {Number(item.precio).toLocaleString('es-CL')}
                            </p>
                        </div>
                    </a>
                </article>
        ))}
    </div>
</section>