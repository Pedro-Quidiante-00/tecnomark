---
import Layout from '../../layouts/Layout.astro';
import {fetchFromAPI} from '../../lib/conections';
interface Post {
    slug: string;
    titulo: string;
    subtitulo: string;
    resumen: string;
    contenido: string;
    cover: {
        url: string;
    };
    categoria: {
        nombre: string;
    };
}
export async function getStaticPaths() {
    const posts = await fetchFromAPI('posts');
    return posts.map((post: Post) => ({
        params: {
            slug: post.slug
        },
        props: {
            post: post
        },
    }));
}
interface Props {
    post: Post;
}
const { post } = Astro.props;
const categoriaNombre = post.categoria?.nombre || 'Blog';
---

<Layout>
    <div class="w-full h-[400px] md:h-[500px] relative">
        <img
                src={post.cover?.url || '/placeholder.png'}
                alt={post.titulo}
                class="w-full h-full object-cover"
        />
        <div class="absolute inset-0 bg-black/40"></div>
    </div>
    <article class="max-w-4xl bg-white relative z-10 -mt-32 mb-20 p-6 md:p-12 rounded-xl shadow-2xl mx-auto md:mx-auto">
        <div class="flex justify-between items-center mb-6 border-b border-gray-200 pb-4">
            <a href="/blog" class="font-lectura text-gray-950 hover:text-black transition-colors font-bold text-sm">
                Volver
            </a>
            <span class="font-lectura bg-gray-100 text-gray-950 px-3 py-1 rounded text-xs font-bold uppercase tracking-wide">
                {categoriaNombre}
            </span>
        </div>
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-titulo md:text-5xl font-black text-gray-950 mb-4 leading-tight">
                {post.titulo}
            </h1>

            {post.subtitulo && (
                    <p class="font-lectura text-lg text-gray-950 mt-4">
                        {post.subtitulo}
                    </p>
            )}
        </header>
        <div class="text-gray-950">

            <div class="bg-gray-50 p-6 rounded-lg mb-8 border-l-4 border-gray-300">
                <p class="font-lectura text-lg italic text-gray-950">
                    {post.resumen}
                </p>
            </div>

            <div class="font-lectura whitespace-pre-line text-lg leading-loose px-2 md:px-4 text-gray-950">
                {post.contenido}
            </div>
        </div>
    </article>
</Layout>